{
  "language": "Solidity",
  "sources": {
    "contracts/ManufacturerV1.sol": {
      "content": "//SPDX-License-Identifier: Unlicense\npragma solidity ^0.8.0;\n\ninterface IERC20 {\n    function transferFrom(\n        address sender,\n        address recipient,\n        uint256 amount\n    ) external returns (bool);\n\n    function balanceOf(address account) external view returns (uint256);\n}\n\ninterface IStation {\n    function mint(address to, uint256 tokenId, string memory _tokenURI, bytes memory _data) external;\n    function totalSupply() external view returns (uint256);\n}\n\ncontract ManufacturerV1 {\n    uint256 public constant SALE_LIMIT = 9000;\n    uint256 public constant TEAM_LIMIT = 1000;\n    uint256 public constant PRICE = 0.08 ether;\n\n    address public operator;\n    IERC20 public saleToken;\n    uint256 public sold;\n    uint256 public teamMinted;\n    bool public saleIsActive;\n\n    IStation public station;\n    address public stationLabs;\n\n    constructor(\n        address _operator,\n        IERC20 _saleToken,\n        IStation _station,\n        address _stationLabs\n    ) {\n        operator = _operator;\n        saleToken = _saleToken;\n        station = _station;\n        stationLabs = _stationLabs;\n    }\n\n    function buy(uint256 count) public {\n        require(count > 0, \"Spaceship count cannot be Zero!\");\n        require(count <= SALE_LIMIT - sold, \"Sale out of stock!\");\n        require(saleIsActive, \"Sale is not active!\");\n        \n        uint256 amountDue = count * PRICE;\n        uint256 balanceBefore = saleToken.balanceOf(stationLabs);\n        saleToken.transferFrom(msg.sender, stationLabs, amountDue);\n        uint256 balanceAfter = saleToken.balanceOf(stationLabs);\n        require(balanceAfter - balanceBefore == amountDue);\n\n        for(uint i=0; i<count; i++) {\n            string memory tokenURI = string(abi.encodePacked(\"https://station0x.com/spaceships/\", address(station), \"/\", station.totalSupply(), \".json\"));\n            station.mint(msg.sender, station.totalSupply(), tokenURI, \"\");\n        }\n\n        sold += count;\n    }\n\n    function mintTo(address to, uint256 count) public {\n        require(msg.sender == operator);\n        require(count <= TEAM_LIMIT - teamMinted);\n        require(count > 0);\n\n        for(uint i=0; i<count; i++) {\n            string memory tokenURI = string(abi.encodePacked(\"https://station0x.com/spaceships/\", address(station), \"/\", station.totalSupply(), \".json\"));\n            station.mint(to, station.totalSupply(), tokenURI, \"\");\n        }\n\n        teamMinted += count;\n\n    }\n\n    function setSaleStatus(bool status) public {\n        require(msg.sender == operator);\n        saleIsActive = status;\n    }\n\n    function setOperator(address _newOperator) public {\n        require(msg.sender == operator);\n        operator = _newOperator;\n        emit SetOperator(_newOperator);\n    }\n\n    event SetOperator(address _newOperator);\n\n}"
    }
  },
  "settings": {
    "optimizer": {
      "enabled": true,
      "runs": 200
    },
    "outputSelection": {
      "*": {
        "*": [
          "abi",
          "evm.bytecode",
          "evm.deployedBytecode",
          "evm.methodIdentifiers",
          "metadata",
          "devdoc",
          "userdoc",
          "storageLayout",
          "evm.gasEstimates"
        ],
        "": [
          "ast"
        ]
      }
    },
    "metadata": {
      "useLiteralContent": true
    }
  }
}